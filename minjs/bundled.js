!function t(r,e,n){function o(a,u){if(!e[a]){if(!r[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[a]={exports:{}};r[a][0].call(l.exports,function(t){var e=r[a][1][t];return o(e?e:t)},l,l.exports,t,r,e,n)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=t("./directions"),a=t("./utils"),u=a.transpose,s=a.twoOrFour,c=a.getFlatArr,l=(a.absoluteDiff,function(){function t(){n(this,t),this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.lastOrientation="horizontal",this.lastDirection,this.emptyspots=[[0,1,2,3],[0,1,2,3],[0,1,2,3],[0,1,2,3]],this.gameOver=!1,this.transposed}return o(t,[{key:"fillRandomEmptySpace",value:function(){var t=Math.round(3*Math.random()+0),r=this.emptyspots[t];if(r.length){var e=Math.round(Math.random()*(r.length-1-0)+0),n=r[e];this.board[t][n]=s(),this.emptyspots[t].splice(e,1)}else this.gameOver=!0}},{key:"update",value:function(t,r){this.lastDirection=r,t!==this.lastOrientation&&(this.board=u(this.board));var e=i[t][r];this.swipe(e),this.lastOrientation=t}},{key:"swipe",value:function(t){for(var r=0;4>r;r++)this.board[r]=t(this.board[r])}},{key:"actualScore",value:function(){var t=c(this.board);return Math.max.apply(Math,t)}},{key:"clusteredScore",value:function r(){var t=c(this.board),r=t.reduce(function(r,e,n){var o=a.getNeighbors(t,e),i=a.getAverageDiffSansZeros(o,n);return r+=i},0);return r}},{key:"heuristicScore",value:function(){var t=this.actualScore(),r=this.clusteredScore(),e=c(this.emptyspots).length,n=t+Math.log(t)*e-r;return Math.max(n,Math.min(t,1))}}]),t}());r.exports=l},{"./directions":2,"./utils":5}],2:[function(t,r,e){"use strict";var n=t("./swipe");r.exports={horizontal:{left:n.swipeLeft,right:n.swipeRight},vertical:{up:n.swipeLeft,down:n.swipeRight}}},{"./swipe":4}],3:[function(t,r,e){"use strict";function n(){console.log("random"),a.fillRandomEmptySpace(),console.log("render"),o(a)}function o(t){for(var r=t.board,e=t.lastOrientation,n=void 0,o=void 0,i=0;4>i;i++)for(var a=0;4>a;a++){"horizontal"===e?(n=i,o=a):(n=a,o=i);var u=$('[data-cellid="'+n+"-"+o+'"]');u.text()!==r[n][o]&&(u.empty(),r[n][o]?$(u).html('<div class="cell-num"><h1>'+r[n][o]+"</h1></div>"):$(u).html('<div class="cell-num zero"><h1>'+r[n][o]+"</h1></div>"))}}var i=t("./board"),a=new i;n(),$("body").keydown(function(t){37===t.keyCode?(a.update("horizontal","left"),o(a)):39===t.keyCode?(a.update("horizontal","right"),o(a)):38===t.keyCode?(a.update("vertical","up"),o(a)):40===t.keyCode&&(a.update("vertical","down"),o(a)),a.fillRandomEmptySpace(),o(a)})},{"./board":1}],4:[function(t,r,e){"use strict";function n(t){for(var r=[0,0,0,0],e=3,n={},o=3;o>=0;o--)if(!n[o]&&t[o])if(t[o]!==t[o-1])r[e]=t[o],e--;else{var i=t[o-1]+t[o];r[e]=i,n[o-1]=!0,e--}return t=r}function o(t){for(var r=[],e={},n=0;4>n;n++)if(!e[n]&&t[n])if(t[n]!==t[n+1])r.push(t[n]);else{var o=t[n+1]+t[n];r.push(o),e[n+1]=!0}return t=r.concat(i(4-r.length))}var i=t("./utils").fillZeros;r.exports={swipeRight:n,swipeLeft:o}},{"./utils":5}],5:[function(t,r,e){"use strict";function n(){var t=[4,2],r=Math.round(1*Math.random()+1);return t[r-1]}function o(t){return t.reduce(function(t,r){return t=t.concat(r)},[])}function i(t,r){return t-r}function a(t){for(var r=t.length,e=t[0].length,n=[],o=0;r>o;o++){n[o]=[];for(var i=0;e>i;i++)n[o][i]=t[i][o]}return n}function u(t,r){var e=[t[r-4],t[r+1],t[r+4],t[r-1]];return e}function s(t){var r=0,e=t.reduce(function(t,e){return e&&(t+=e,r++),t},0);return e?Math.floor(e/r):0}function c(t){for(var r=[],e=0;t>e;e++)r.push(0);return r}r.exports={twoOrFour:n,transpose:a,fillZeros:c,getFlatArr:o,absoluteDiff:i,getAverageDiffSansZeros:s,getNeighbors:u}},{}]},{},[3]);