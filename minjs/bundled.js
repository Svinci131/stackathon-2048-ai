!function t(r,e,n){function i(a,u){if(!e[a]){if(!r[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[a]={exports:{}};r[a][0].call(f.exports,function(t){var e=r[a][1][t];return i(e?e:t)},f,f.exports,t,r,e,n)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),o=t("./directions"),a=t("./utils"),u=a.transpose,s=a.twoOrFour,c=a.getFlatArr,f=(a.absoluteDiff,function(){function t(){n(this,t),this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.lastOrientation="horizontal",this.lastDirection,this.emptyspots=[[0,1,2,3],[0,1,2,3],[0,1,2,3],[0,1,2,3]],this.gameOver=!1,this.transposed}return i(t,[{key:"fillRandomEmptySpace",value:function(){var t=Math.round(3*Math.random()+0),r=this.emptyspots[t];if(r.length){var e=Math.round(Math.random()*(r.length-1-0)+0),n=r[e];this.board[t][n]=s(),this.emptyspots[t].splice(e,1)}else this.gameOver=!0}},{key:"update",value:function(t,r){this.lastDirection=r,t!==this.lastOrientation&&(this.board=u(this.board));var e=o[t][r];this.swipe(e),this.lastOrientation=t}},{key:"swipe",value:function(t){for(var r=0;4>r;r++)this.board[r]=t(this.board[r])}},{key:"actualScore",value:function(){var t=c(this.board);return Math.max.apply(Math,t)}},{key:"clusteredScore",value:function r(){var t=c(this.board),r=t.reduce(function(r,e,n){var i=a.getNeighbors(t,e),o=a.getAverageDiffSansZeros(i,n);return r+=o},0);return r}},{key:"heuristicScore",value:function(){var t=this.actualScore(),r=this.clusteredScore(),e=c(this.emptyspots).length,n=t+Math.log(t)*e-r;return Math.max(n,Math.min(t,1))}}]),t}());r.exports=f},{"./directions":2,"./utils":5}],2:[function(t,r,e){"use strict";var n=t("./swipe");r.exports={horizontal:{left:n.swipeLeft,right:n.swipeRight},vertical:{up:n.swipeLeft,down:n.swipeRight}}},{"./swipe":4}],3:[function(t,r,e){"use strict";function n(){a.fillRandomEmptySpace(),i(a)}function i(t){for(var r=t.board,e=t.lastOrientation,n=0;4>n;n++)for(var i=0;4>i;i++){var o=void 0,a=void 0,u=$('[data-cellid="'+n+"-"+i+'"]');"horizontal"===e?(o=n,a=i):(o=i,a=n),u.text()!==r[o][a]&&(u.empty(),r[o][a]?$(u).html('<div class="cell-num"><h1>'+r[o][a]+"</h1></div>"):$(u).html('<div class="cell-num zero"><h1>'+r[o][a]+"</h1></div>"))}}var o=t("./board"),a=new o,u=!1;$("#ai").on("click",function(){u=!u}),n(),$("body").keydown(function(t){console.log(u),u||(37===t.keyCode?(a.update("horizontal","left"),i(a)):39===t.keyCode?(a.update("horizontal","right"),i(a)):38===t.keyCode?(a.update("vertical","up"),i(a)):40===t.keyCode&&(a.update("vertical","down"),i(a)),a.fillRandomEmptySpace(),i(a))})},{"./board":1}],4:[function(t,r,e){"use strict";function n(t){for(var r=[0,0,0,0],e=3,n={},i=3;i>=0;i--)if(!n[i]&&t[i])if(t[i]!==t[i-1])r[e]=t[i],e--;else{var o=t[i-1]+t[i];r[e]=o,n[i-1]=!0,e--}return t=r}function i(t){for(var r=[],e={},n=0;4>n;n++)if(!e[n]&&t[n])if(t[n]!==t[n+1])r.push(t[n]);else{var i=t[n+1]+t[n];r.push(i),e[n+1]=!0}return t=r.concat(o(4-r.length))}var o=t("./utils").fillZeros;r.exports={swipeRight:n,swipeLeft:i}},{"./utils":5}],5:[function(t,r,e){"use strict";function n(){var t=[4,2],r=Math.round(1*Math.random()+1);return t[r-1]}function i(t){return t.reduce(function(t,r){return t=t.concat(r)},[])}function o(t,r){return t-r}function a(t){for(var r=t.length,e=t[0].length,n=[],i=0;r>i;i++){n[i]=[];for(var o=0;e>o;o++)n[i][o]=t[o][i]}return n}function u(t,r){var e=[t[r-4],t[r+1],t[r+4],t[r-1]];return e}function s(t){var r=0,e=t.reduce(function(t,e){return e&&(t+=e,r++),t},0);return e?Math.floor(e/r):0}function c(t){for(var r=[],e=0;t>e;e++)r.push(0);return r}r.exports={twoOrFour:n,transpose:a,fillZeros:c,getFlatArr:i,absoluteDiff:o,getAverageDiffSansZeros:s,getNeighbors:u}},{}]},{},[3]);