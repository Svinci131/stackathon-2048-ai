!function t(r,e,n){function o(i,u){if(!e[i]){if(!r[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[i]={exports:{}};r[i][0].call(s.exports,function(t){var e=r[i][1][t];return o(e?e:t)},s,s.exports,t,r,e,n)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function a(t){n(this,a),this.boardObj=t,this.score=t.heuristicScore(),this.children=null};r.exports=o},{}],2:[function(t,r,e){"use strict";function n(t,r,e){var n=new u;n.board=f(t),n.update(r,e);var o=new c(n);return o.boardObj.hasLost(),o.boardObj.hasWon(),o}function o(t){var r=t.boardObj.board,e=n(r,"horizontal","right"),o=n(r,"horizontal","left"),a=n(r,"vertical","up"),i=n(r,"vertical","down");return[e,o,i,a]}function a(t,r,e,n){var o=new u;o.board=f(t),o.board[r][e]=n;var a=new c(o);return a}function i(t){var r=[2,4],e=[],n=t.boardObj.board,o=t.boardObj.getEmptySpots();return o.forEach(function(t,o){for(var i=t[0],u=t[1],c=0;2>c;c++){var f=a(n,i,u,r[c]);e.push(f)}}),e}var u=t("../board"),c=t("./node"),f=t("lodash.clone");r.exports={createAllPossibleRandomStates:i,createRandomState:a,createAllPossibleDelibrateStates:o,createDelibrateState:n}},{"../board":4,"./node":1,"lodash.clone":10}],3:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=(t("../board"),t("./stateGeneration").createAllPossibleRandomStates),u=t("./stateGeneration").createAllPossibleDelibrateStates,c=t("./node"),f=function(){function t(r){n(this,t),this.head=new c(r),this.bestDirections=[]}return a(t,[{key:"min",value:function(t,r){return t=t instanceof c?t.score<r.score?t:r:t<r.score?t:r}},{key:"max",value:function(t,r){return t=t instanceof c?t.score>r.score?t:r:t>r.score?t:r}},{key:"alphaBeta",value:function(t,r,e,n,o){if(0===r||t.boardObj.board.gameOver)return t;if(o){t.children=u(t);for(var a=0;a<t.children.length;a++){var c=t.children[a];if(e=this.max(e,this.alphaBeta(c,r-1,e,n,!1)),e>=n)break}return e}t.children=i(t);for(var f=0;f<t.children.length;f++){var s=t.children[f];if(n=this.min(n,this.alphaBeta(s,r-1,e,n,!0)),e>=n)break}return n}},{key:"minimax",value:function(t,r,e){var n=this;if(0===r||t.boardObj.board.gameOver)return t;if(e){var a=function(){t.children=u(t);var e=-(1/0);return t.children.forEach(function(t){var o=n.minimax(t,r-1,!1);e=e instanceof c?e.score>o.score?e:o:e>o.score?e:o}),{v:e}}();if("object"===("undefined"==typeof a?"undefined":o(a)))return a.v}else{var f=function(){t.children=i(t);var e=1/0;return t.children.forEach(function(t){var o=n.minimax(t,r-1,!0);e=e instanceof c?e.score<o.score?e:o:e<o.score?e:o}),{v:e}}();if("object"===("undefined"==typeof f?"undefined":o(f)))return f.v}}}]),t}();r.exports=f},{"../board":4,"./node":1,"./stateGeneration":2}],4:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=t("./directions"),i=t("./utils"),u=i.transpose,c=i.twoOrFour,f=i.getFlatArr,s=(i.absoluteDiff,t("lodash.clone")),l=function(){function t(){n(this,t),this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.lastOrientation="horizontal",this.lastDirection,this.gameOver=!1,this.transposed}return o(t,[{key:"getEmptySpots",value:function(){for(var t=[],r=0;r<this.board.length;r++)for(var e=0;e<this.board[r].length;e++)0==this.board[r][e]&&t.push([r,e]);return t}},{key:"fillRandomEmptySpace",value:function(){var t=this.getEmptySpots(),r=Math.floor(Math.random()*t.length),e=t[r];this.board[e[0]][e[1]]=c()}},{key:"update",value:function(t,r){this.lastDirection=r,t!==this.lastOrientation&&(this.board=u(this.board));var e=a[t][r];this.swipe(e),this.lastOrientation=t}},{key:"hasWon",value:function(){8===this.actualScore()&&(this.gameOver=!0)}},{key:"hasLost",value:function(){var r=s(this.board),e=new t;e.board=r,e.update("horizontal","right");var n=new t;n.board=r,n.update("horizontal","left");var o=new t;o.board=r,o.update("vertical","up");var a=new t;a.board=r,a.update("vertical","down"),"vertical"===this.lastOrientation?(e.board=u(e.board),n.board=u(n.board)):"horizontal"===this.lastOrientation&&(o.board=u(o.board),a.board=u(a.board));var i=JSON.stringify(e.board)==JSON.stringify(this.board),c=JSON.stringify(n.board)==JSON.stringify(this.board),f=JSON.stringify(o.board)==JSON.stringify(this.board),l=JSON.stringify(a.board)==JSON.stringify(this.board);i&&c&&f&&l&&(console.log("lost"),this.gameOver=!0)}},{key:"swipe",value:function(t){for(var r=0;4>r;r++)this.board[r]=t(this.board[r])}},{key:"actualScore",value:function(){var t=f(this.board);return Math.max.apply(Math,t)}},{key:"clusteredScore",value:function r(){var t=f(this.board),r=t.reduce(function(r,e,n){var o=i.getNeighbors(t,e),a=i.getAverageDiffSansZeros(o,n);return r+=a},0);return r}},{key:"heuristicScore",value:function(){var t=this.actualScore(),r=0,e=this.getEmptySpots().length,n=t+Math.log(t)*e-r;return Math.max(n,Math.min(t,1))}}]),t}();r.exports=l},{"./directions":5,"./utils":8,"lodash.clone":10}],5:[function(t,r,e){"use strict";var n=t("./swipe");r.exports={horizontal:{left:n.swipeLeft,right:n.swipeRight},vertical:{up:n.swipeLeft,down:n.swipeRight}}},{"./swipe":7}],6:[function(t,r,e){"use strict";function n(){c.fillRandomEmptySpace(),o(c)}function o(t){for(var r=t.board,e=t.lastOrientation,n=0;4>n;n++)for(var o=0;4>o;o++){var a=void 0,i=void 0,u=$('[data-cellid="'+n+"-"+o+'"]');"horizontal"===e?(a=n,i=o):(a=o,i=n),u.text()!==r[a][i]&&(u.empty(),r[a][i]?$(u).html('<div class="cell-num"><h1>'+r[a][i]+"</h1></div>"):$(u).html('<div class="cell-num zero"><h1>'+r[a][i]+"</h1></div>"))}}function a(){for(;!h;){var t=s.minimax(s.head,3,!0).boardObj;l.update(t.lastOrientation,t.lastDirection),console.log(o),o(l),l.fillRandomEmptySpace(),o(l)}}var i=t("./board"),u=t("./ai/tree"),c=new i,f=!1,s=new u(c),l=s.head.boardObj,h=l.board.gameOver;$("#ai").on("click",function(){a()}),n(),$("body").keydown(function(t){console.log(f),f||(37===t.keyCode?(c.update("horizontal","left"),o(c)):39===t.keyCode?(c.update("horizontal","right"),o(c)):38===t.keyCode?(c.update("vertical","up"),o(c)):40===t.keyCode&&(c.update("vertical","down"),o(c)),c.fillRandomEmptySpace(),o(c))})},{"./ai/tree":3,"./board":4}],7:[function(t,r,e){"use strict";function n(t){for(var r=[0,0,0,0],e=3,n={},o=3;o>=0;o--)if(!n[o]&&t[o])if(t[o]!==t[o-1])r[e]=t[o],e--;else{var a=t[o-1]+t[o];r[e]=a,n[o-1]=!0,e--}return t=r}function o(t){for(var r=[],e={},n=0;4>n;n++)if(!e[n]&&t[n])if(t[n]!==t[n+1])r.push(t[n]);else{var o=t[n+1]+t[n];r.push(o),e[n+1]=!0}return t=r.concat(a(4-r.length))}var a=t("./utils").fillZeros;r.exports={swipeRight:n,swipeLeft:o}},{"./utils":8}],8:[function(t,r,e){"use strict";function n(){var t=[4,2],r=Math.round(1*Math.random()+1);return t[r-1]}function o(t){return t.reduce(function(t,r){return t=t.concat(r)},[])}function a(t,r){return t-r}function i(t){for(var r=t.length,e=t[0].length,n=[],o=0;r>o;o++){n[o]=[];for(var a=0;e>a;a++)n[o][a]=t[a][o]}return n}function u(t,r){var e=[t[r-4],t[r+1],t[r+4],t[r-1]];return e}function c(t){var r=0,e=t.reduce(function(t,e){return e&&(t+=e,r++),t},0);return e?Math.floor(e/r):0}function f(t){for(var r=[],e=0;t>e;e++)r.push(0);return r}r.exports={twoOrFour:n,transpose:i,fillZeros:f,getFlatArr:o,absoluteDiff:a,getAverageDiffSansZeros:c,getNeighbors:u}},{}],9:[function(t,r,e){(function(t){function n(t,r){return t.set(r[0],r[1]),t}function o(t,r){return t.add(r),t}function a(t,r){for(var e=-1,n=t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function i(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}function u(t,r,e,n){var o=-1,a=t.length;for(n&&a&&(e=t[++o]);++o<a;)e=r(e,t[o],o,t);return e}function c(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}function f(t){return t&&t.Object===Object?t:null}function s(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(e){}return r}function l(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function h(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}function d(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function p(){this.__data__=Lr?Lr(null):{}}function v(t){return this.has(t)&&delete this.__data__[t]}function b(t){var r=this.__data__;if(Lr){var e=r[t];return e===Mt?void 0:e}return jr.call(r,t)?r[t]:void 0}function y(t){var r=this.__data__;return Lr?void 0!==r[t]:jr.call(r,t)}function g(t,r){var e=this.__data__;return e[t]=Lr&&void 0===r?Mt:r,this}function _(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function w(){this.__data__=[]}function m(t){var r=this.__data__,e=J(r,t);if(0>e)return!1;var n=r.length-1;return e==n?r.pop():zr.call(r,e,1),!0}function j(t){var r=this.__data__,e=J(r,t);return 0>e?void 0:r[e][1]}function O(t){return J(this.__data__,t)>-1}function S(t,r){var e=this.__data__,n=J(e,t);return 0>n?e.push([t,r]):e[n][1]=r,this}function x(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function A(){this.__data__={hash:new d,map:new($r||_),string:new d}}function k(t){return ot(this,t)["delete"](t)}function E(t){return ot(this,t).get(t)}function D(t){return ot(this,t).has(t)}function M(t,r){return ot(this,t).set(t,r),this}function z(t){this.__data__=new _(t)}function N(){this.__data__=new _}function P(t){return this.__data__["delete"](t)}function R(t){return this.__data__.get(t)}function $(t){return this.__data__.has(t)}function F(t,r){var e=this.__data__;return e instanceof _&&e.__data__.length==Dt&&(e=this.__data__=new x(e.__data__)),e.set(t,r),this}function C(t,r,e){var n=t[r];jr.call(t,r)&&yt(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function J(t,r){for(var e=t.length;e--;)if(yt(t[e][0],r))return e;return-1}function L(t,r){return t&&rt(r,kt(r),t)}function B(t,r,e,n,o,i,u){var c;if(n&&(c=i?n(t,o,i,u):n(t)),void 0!==c)return c;if(!Ot(t))return t;var f=Vr(t);if(f){if(c=ft(t),!r)return tt(t,c)}else{var l=ct(t),h=l==Ct||l==Jt;if(Hr(t))return W(t,r);if(l==Ut||l==Nt||h&&!i){if(s(t))return i?t:{};if(c=st(h?{}:t),!r)return et(t,L(c,t))}else{if(!fr[l])return i?t:{};c=lt(t,l,B,r)}}u||(u=new z);var d=u.get(t);if(d)return d;if(u.set(t,c),!f)var p=e?nt(t):kt(t);return a(p||t,function(o,a){p&&(a=o,o=t[a]),C(c,a,B(o,r,e,n,a,t,u))}),c}function U(t){return Ot(t)?Dr(t):{}}function I(t,r,e){var n=r(t);return Vr(t)?n:i(n,e(t))}function T(t,r){return jr.call(t,r)||"object"==typeof t&&r in t&&null===it(t)}function q(t){return Pr(Object(t))}function G(t){return function(r){return null==r?void 0:r[t]}}function W(t,r){if(r)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}function Z(t){var r=new t.constructor(t.byteLength);return new kr(r).set(new kr(t)),r}function V(t,r){var e=r?Z(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function H(t,r,e){var o=r?e(l(t),!0):l(t);return u(o,n,new t.constructor)}function K(t){var r=new t.constructor(t.source,ir.exec(t));return r.lastIndex=t.lastIndex,r}function Q(t,r,e){var n=r?e(h(t),!0):h(t);return u(n,o,new t.constructor)}function X(t){return Wr?Object(Wr.call(t)):{}}function Y(t,r){var e=r?Z(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function tt(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}function rt(t,r,e,n){e||(e={});for(var o=-1,a=r.length;++o<a;){var i=r[o],u=n?n(e[i],t[i],i,e,t):t[i];C(e,i,u)}return e}function et(t,r){return rt(t,ut(t),r)}function nt(t){return I(t,kt,ut)}function ot(t,r){var e=t.__data__;return pt(r)?e["string"==typeof r?"string":"hash"]:e.map}function at(t,r){var e=t[r];return xt(e)?e:void 0}function it(t){return Nr(Object(t))}function ut(t){return Er(Object(t))}function ct(t){return Or.call(t)}function ft(t){var r=t.length,e=t.constructor(r);return r&&"string"==typeof t[0]&&jr.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function st(t){return"function"!=typeof t.constructor||vt(t)?{}:U(it(t))}function lt(t,r,e,n){var o=t.constructor;switch(r){case Vt:return Z(t);case Rt:case $t:return new o(+t);case Ht:return V(t,n);case Kt:case Qt:case Xt:case Yt:case tr:case rr:case er:case nr:case or:return Y(t,n);case Lt:return H(t,n,e);case Bt:case Gt:return new o(t);case Tt:return K(t);case qt:return Q(t,n,e);case Wt:return X(t)}}function ht(t){var r=t?t.length:void 0;return jt(r)&&(Vr(t)||At(t)||gt(t))?c(r,String):null}function dt(t,r){return r=null==r?zt:r,!!r&&("number"==typeof t||cr.test(t))&&t>-1&&t%1==0&&r>t}function pt(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}function vt(t){var r=t&&t.constructor,e="function"==typeof r&&r.prototype||wr;return t===e}function bt(t){if(null!=t){try{return mr.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function yt(t,r){return t===r||t!==t&&r!==r}function gt(t){return wt(t)&&jr.call(t,"callee")&&(!Mr.call(t,"callee")||Or.call(t)==Nt)}function _t(t){return null!=t&&jt(Zr(t))&&!mt(t)}function wt(t){return St(t)&&_t(t)}function mt(t){var r=Ot(t)?Or.call(t):"";return r==Ct||r==Jt}function jt(t){return"number"==typeof t&&t>-1&&t%1==0&&zt>=t}function Ot(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function St(t){return!!t&&"object"==typeof t}function xt(t){if(!Ot(t))return!1;var r=mt(t)||s(t)?Sr:ur;return r.test(bt(t))}function At(t){return"string"==typeof t||!Vr(t)&&St(t)&&Or.call(t)==Gt}function kt(t){var r=vt(t);if(!r&&!_t(t))return q(t);var e=ht(t),n=!!e,o=e||[],a=o.length;for(var i in t)!T(t,i)||n&&("length"==i||dt(i,a))||r&&"constructor"==i||o.push(i);return o}function Et(t){return function(){return t}}var Dt=200,Mt="__lodash_hash_undefined__",zt=9007199254740991,Nt="[object Arguments]",Pt="[object Array]",Rt="[object Boolean]",$t="[object Date]",Ft="[object Error]",Ct="[object Function]",Jt="[object GeneratorFunction]",Lt="[object Map]",Bt="[object Number]",Ut="[object Object]",It="[object Promise]",Tt="[object RegExp]",qt="[object Set]",Gt="[object String]",Wt="[object Symbol]",Zt="[object WeakMap]",Vt="[object ArrayBuffer]",Ht="[object DataView]",Kt="[object Float32Array]",Qt="[object Float64Array]",Xt="[object Int8Array]",Yt="[object Int16Array]",tr="[object Int32Array]",rr="[object Uint8Array]",er="[object Uint8ClampedArray]",nr="[object Uint16Array]",or="[object Uint32Array]",ar=/[\\^$.*+?()[\]{}|]/g,ir=/\w*$/,ur=/^\[object .+?Constructor\]$/,cr=/^(?:0|[1-9]\d*)$/,fr={};fr[Nt]=fr[Pt]=fr[Vt]=fr[Ht]=fr[Rt]=fr[$t]=fr[Kt]=fr[Qt]=fr[Xt]=fr[Yt]=fr[tr]=fr[Lt]=fr[Bt]=fr[Ut]=fr[Tt]=fr[qt]=fr[Gt]=fr[Wt]=fr[rr]=fr[er]=fr[nr]=fr[or]=!0,fr[Ft]=fr[Ct]=fr[Zt]=!1;var sr={"function":!0,object:!0},lr=sr[typeof e]&&e&&!e.nodeType?e:void 0,hr=sr[typeof r]&&r&&!r.nodeType?r:void 0,dr=hr&&hr.exports===lr?lr:void 0,pr=f(lr&&hr&&"object"==typeof t&&t),vr=f(sr[typeof self]&&self),br=f(sr[typeof window]&&window),yr=f(sr[typeof this]&&this),gr=pr||br!==(yr&&yr.window)&&br||vr||yr||Function("return this")(),_r=Array.prototype,wr=Object.prototype,mr=Function.prototype.toString,jr=wr.hasOwnProperty,Or=wr.toString,Sr=RegExp("^"+mr.call(jr).replace(ar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xr=dr?gr.Buffer:void 0,Ar=gr.Symbol,kr=gr.Uint8Array,Er=Object.getOwnPropertySymbols,Dr=Object.create,Mr=wr.propertyIsEnumerable,zr=_r.splice,Nr=Object.getPrototypeOf,Pr=Object.keys,Rr=at(gr,"DataView"),$r=at(gr,"Map"),Fr=at(gr,"Promise"),Cr=at(gr,"Set"),Jr=at(gr,"WeakMap"),Lr=at(Object,"create"),Br=bt(Rr),Ur=bt($r),Ir=bt(Fr),Tr=bt(Cr),qr=bt(Jr),Gr=Ar?Ar.prototype:void 0,Wr=Gr?Gr.valueOf:void 0;d.prototype.clear=p,d.prototype["delete"]=v,d.prototype.get=b,d.prototype.has=y,d.prototype.set=g,_.prototype.clear=w,_.prototype["delete"]=m,_.prototype.get=j,_.prototype.has=O,_.prototype.set=S,x.prototype.clear=A,x.prototype["delete"]=k,x.prototype.get=E,x.prototype.has=D,x.prototype.set=M,z.prototype.clear=N,z.prototype["delete"]=P,z.prototype.get=R,z.prototype.has=$,z.prototype.set=F;var Zr=G("length");Er||(ut=function(){return[]}),(Rr&&ct(new Rr(new ArrayBuffer(1)))!=Ht||$r&&ct(new $r)!=Lt||Fr&&ct(Fr.resolve())!=It||Cr&&ct(new Cr)!=qt||Jr&&ct(new Jr)!=Zt)&&(ct=function(t){var r=Or.call(t),e=r==Ut?t.constructor:void 0,n=e?bt(e):void 0;if(n)switch(n){case Br:return Ht;case Ur:return Lt;case Ir:return It;case Tr:return qt;case qr:return Zt}return r});var Vr=Array.isArray,Hr=xr?function(t){return t instanceof xr}:Et(!1);r.exports=B}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,r,e){function n(t){return o(t,!1,!0)}var o=t("lodash._baseclone");r.exports=n},{"lodash._baseclone":9}]},{},[6]);