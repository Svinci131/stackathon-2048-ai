!function t(r,e,n){function o(i,u){if(!e[i]){if(!r[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var f=e[i]={exports:{}};r[i][0].call(f.exports,function(t){var e=r[i][1][t];return o(e?e:t)},f,f.exports,t,r,e,n)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function a(t){n(this,a),this.boardObj=t,this.score=t.heuristicScore(),this.children=null};r.exports=o},{}],2:[function(t,r,e){"use strict";function n(t,r,e){var n=new u;n.board=s(t),n.update(r,e);var o=new c(n);return o.boardObj.hasLost(),o.boardObj.hasWon(),o}function o(t){var r=t.boardObj.board,e=n(r,"horizontal","right"),o=n(r,"horizontal","left"),a=n(r,"vertical","up"),i=n(r,"vertical","down");return[e,o,i,a]}function a(t,r,e,n){var o=new u;o.board=s(t),o.board[r][e]=n;var a=new c(o);return a}function i(t){var r=[2,4],e=[],n=t.boardObj.board,o=t.boardObj.getEmptySpots();return o.forEach(function(t,o){for(var i=t[0],u=t[1],c=0;2>c;c++){var s=a(n,i,u,r[c]);e.push(s)}}),e}var u=t("../board"),c=t("./node"),s=t("lodash.clone");r.exports={createAllPossibleRandomStates:i,createRandomState:a,createAllPossibleDelibrateStates:o,createDelibrateState:n}},{"../board":4,"./node":1,"lodash.clone":10}],3:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),i=(t("../board"),t("./stateGeneration").createAllPossibleRandomStates),u=t("./stateGeneration").createAllPossibleDelibrateStates,c=t("./node"),s=function(){function t(r){n(this,t),this.head=new c(r),this.bestDirections=[]}return a(t,[{key:"min",value:function(t,r){return t=t instanceof c?t.score<r.score?t:r:t<r.score?t:r}},{key:"max",value:function(t,r){return t=t instanceof c?t.score>r.score?t:r:t>r.score?t:r}},{key:"alphaBeta",value:function(t,r,e,n,o){if(0===r||t.boardObj.board.gameOver)return t;if(o){t.children=u(t);for(var a=0;a<t.children.length;a++){var c=t.children[a];if(e=this.max(e,this.alphaBeta(c,r-1,e,n,!1)),e>=n)break}return e}t.children=i(t);for(var s=0;s<t.children.length;s++){var f=t.children[s];if(n=this.min(n,this.alphaBeta(f,r-1,e,n,!0)),e>=n)break}return n}},{key:"minimax",value:function(t,r,e){var n=this;if(0===r||t.boardObj.board.gameOver)return t;if(e){var a=function(){t.children=u(t);var e=-(1/0);return t.children.forEach(function(t){var o=n.minimax(t,r-1,!1);e=e instanceof c?e.score>o.score?e:o:e>o.score?e:o}),{v:e}}();if("object"===("undefined"==typeof a?"undefined":o(a)))return a.v}else{var s=function(){t.children=i(t);var e=1/0;return t.children.forEach(function(t){var o=n.minimax(t,r-1,!0);e=e instanceof c?e.score>o.score?e:o:e<o.score?e:o}),{v:e}}();if("object"===("undefined"==typeof s?"undefined":o(s)))return s.v}}}]),t}();r.exports=s},{"../board":4,"./node":1,"./stateGeneration":2}],4:[function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=t("./directions"),i=t("./utils"),u=i.transpose,c=i.twoOrFour,s=i.getFlatArr,f=(i.absoluteDiff,t("lodash.clone")),l=function(){function t(){n(this,t),this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.lastOrientation="horizontal",this.lastDirection,this.gameOver=!1,this.transposed}return o(t,[{key:"getEmptySpots",value:function(){for(var t=[],r=0;r<this.board.length;r++)for(var e=0;e<this.board[r].length;e++)0==this.board[r][e]&&t.push([r,e]);return t}},{key:"fillRandomEmptySpace",value:function(){var t=this.getEmptySpots(),r=Math.floor(Math.random()*t.length),e=t[r];this.board[e[0]][e[1]]=c()}},{key:"update",value:function(t,r){this.lastDirection=r,t!==this.lastOrientation&&(this.board=u(this.board));var e=a[t][r];this.swipe(e),this.lastOrientation=t}},{key:"highestTile",value:function(){var t=s(this.board);return Math.max.apply(Math,t)}},{key:"hasWon",value:function(){8===this.highestTile()&&(this.gameOver=!0)}},{key:"hasLost",value:function(){var r=f(this.board),e=new t;e.board=r,e.update("horizontal","right");var n=new t;n.board=r,n.update("horizontal","left");var o=new t;o.board=r,o.update("vertical","up");var a=new t;a.board=r,a.update("vertical","down"),"vertical"===this.lastOrientation?(e.board=u(e.board),n.board=u(n.board)):"horizontal"===this.lastOrientation&&(o.board=u(o.board),a.board=u(a.board));var i=JSON.stringify(e.board)==JSON.stringify(this.board),c=JSON.stringify(n.board)==JSON.stringify(this.board),s=JSON.stringify(o.board)==JSON.stringify(this.board),l=JSON.stringify(a.board)==JSON.stringify(this.board);i&&c&&s&&l&&(console.log("lost"),this.gameOver=!0)}},{key:"swipe",value:function(t){for(var r=0;4>r;r++)this.board[r]=t(this.board[r])}},{key:"actualScore",value:function(){var t=s(this.board);return t.reduce(function(t,r){return t+r})}},{key:"clusteredScore",value:function r(){var t=s(this.board),r=t.reduce(function(r,e,n){var o=i.getNeighbors(t,e),a=i.getAverageDiffSansZeros(o,n);return r+=a},0);return r}},{key:"heuristicScore",value:function(){var t=this.actualScore(),r=this.clusteredScore(),e=this.getEmptySpots().length,n=Math.floor(t/r*10*e);return n}}]),t}();r.exports=l},{"./directions":5,"./utils":8,"lodash.clone":10}],5:[function(t,r,e){"use strict";var n=t("./swipe");r.exports={horizontal:{left:n.swipeLeft,right:n.swipeRight},vertical:{up:n.swipeLeft,down:n.swipeRight}}},{"./swipe":7}],6:[function(t,r,e){"use strict";function n(){c.fillRandomEmptySpace(),o(c)}function o(t){for(var r=t.board,e=t.lastOrientation,n=0;4>n;n++)for(var o=0;4>o;o++){var a=void 0,i=void 0,u=$('[data-cellid="'+n+"-"+o+'"]');"horizontal"===e?(a=n,i=o):(a=o,i=n),u.text()!==r[a][i]&&(u.empty(),r[a][i]?$(u).html('<div class="cell-num"><h1>'+r[a][i]+"</h1></div>"):$(u).html('<div class="cell-num zero"><h1>'+r[a][i]+"</h1></div>"))}}function a(){for(;!l.gameOver;){l.hasWon(),l.hasLost(),console.log("before",f.head.boardObj.board),o(l);var t=f.minimax(f.head,3,!0),r=t.boardObj.lastOrientation,e=t.boardObj.lastDirection;l.update(r,e),l.fillRandomEmptySpace(),o(l)}}var i=t("./board"),u=t("./ai/tree"),c=new i,s=!1,f=new u(c),l=f.head.boardObj;l.board.gameOver;$("#ai").on("click",function(){a()}),n(),$("body").keydown(function(t){console.log(s),s||(37===t.keyCode?(c.update("horizontal","left"),o(c)):39===t.keyCode?(c.update("horizontal","right"),o(c)):38===t.keyCode?(c.update("vertical","up"),o(c)):40===t.keyCode&&(c.update("vertical","down"),o(c)),c.hasLost(),c.gameOver&&(alert("gameOver"),Window.reload()),c.fillRandomEmptySpace(),o(c))})},{"./ai/tree":3,"./board":4}],7:[function(t,r,e){"use strict";function n(t){for(var r=[0,0,0,0],e=3,n={},o=3;o>=0;o--)if(!n[o]&&t[o])if(t[o]!==t[o-1])r[e]=t[o],e--;else{var a=t[o-1]+t[o];r[e]=a,n[o-1]=!0,e--}return t=r}function o(t){for(var r=[],e={},n=0;4>n;n++)if(!e[n]&&t[n])if(t[n]!==t[n+1])r.push(t[n]);else{var o=t[n+1]+t[n];r.push(o),e[n+1]=!0}return t=r.concat(a(4-r.length))}var a=t("./utils").fillZeros;r.exports={swipeRight:n,swipeLeft:o}},{"./utils":8}],8:[function(t,r,e){"use strict";function n(){var t=[4,2],r=Math.round(1*Math.random()+1);return t[r-1]}function o(t){return t.reduce(function(t,r){return t=t.concat(r)},[])}function a(t,r){return t-r}function i(t){for(var r=t.length,e=t[0].length,n=[],o=0;r>o;o++){n[o]=[];for(var a=0;e>a;a++)n[o][a]=t[a][o]}return n}function u(t,r){var e=[t[r-4],t[r+1],t[r+4],t[r-1]];return e}function c(t){var r=0,e=t.reduce(function(t,e){return e&&(t+=e,r++),t},0);return e?Math.floor(e/r):0}function s(t){for(var r=[],e=0;t>e;e++)r.push(0);return r}r.exports={twoOrFour:n,transpose:i,fillZeros:s,getFlatArr:o,absoluteDiff:a,getAverageDiffSansZeros:c,getNeighbors:u}},{}],9:[function(t,r,e){(function(t){function n(t,r){return t.set(r[0],r[1]),t}function o(t,r){return t.add(r),t}function a(t,r){for(var e=-1,n=t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function i(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}function u(t,r,e,n){var o=-1,a=t.length;for(n&&a&&(e=t[++o]);++o<a;)e=r(e,t[o],o,t);return e}function c(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}function s(t){return t&&t.Object===Object?t:null}function f(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(e){}return r}function l(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function h(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}function d(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function v(){this.__data__=Jr?Jr(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function b(t){var r=this.__data__;if(Jr){var e=r[t];return e===zt?void 0:e}return Or.call(r,t)?r[t]:void 0}function y(t){var r=this.__data__;return Jr?void 0!==r[t]:Or.call(r,t)}function g(t,r){var e=this.__data__;return e[t]=Jr&&void 0===r?zt:r,this}function _(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function w(){this.__data__=[]}function m(t){var r=this.__data__,e=L(r,t);if(0>e)return!1;var n=r.length-1;return e==n?r.pop():Mr.call(r,e,1),!0}function O(t){var r=this.__data__,e=L(r,t);return 0>e?void 0:r[e][1]}function j(t){return L(this.__data__,t)>-1}function S(t,r){var e=this.__data__,n=L(e,t);return 0>n?e.push([t,r]):e[n][1]=r,this}function x(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function A(){this.__data__={hash:new d,map:new($r||_),string:new d}}function k(t){return ot(this,t)["delete"](t)}function E(t){return ot(this,t).get(t)}function D(t){return ot(this,t).has(t)}function z(t,r){return ot(this,t).set(t,r),this}function M(t){this.__data__=new _(t)}function N(){this.__data__=new _}function P(t){return this.__data__["delete"](t)}function R(t){return this.__data__.get(t)}function $(t){return this.__data__.has(t)}function F(t,r){var e=this.__data__;return e instanceof _&&e.__data__.length==Dt&&(e=this.__data__=new x(e.__data__)),e.set(t,r),this}function C(t,r,e){var n=t[r];Or.call(t,r)&&yt(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function L(t,r){for(var e=t.length;e--;)if(yt(t[e][0],r))return e;return-1}function J(t,r){return t&&rt(r,kt(r),t)}function T(t,r,e,n,o,i,u){var c;if(n&&(c=i?n(t,o,i,u):n(t)),void 0!==c)return c;if(!jt(t))return t;var s=Vr(t);if(s){if(c=st(t),!r)return tt(t,c)}else{var l=ct(t),h=l==Ct||l==Lt;if(Hr(t))return G(t,r);if(l==Bt||l==Nt||h&&!i){if(f(t))return i?t:{};if(c=ft(h?{}:t),!r)return et(t,J(c,t))}else{if(!sr[l])return i?t:{};c=lt(t,l,T,r)}}u||(u=new M);var d=u.get(t);if(d)return d;if(u.set(t,c),!s)var v=e?nt(t):kt(t);return a(v||t,function(o,a){v&&(a=o,o=t[a]),C(c,a,T(o,r,e,n,a,t,u))}),c}function B(t){return jt(t)?Dr(t):{}}function U(t,r,e){var n=r(t);return Vr(t)?n:i(n,e(t))}function I(t,r){return Or.call(t,r)||"object"==typeof t&&r in t&&null===it(t)}function W(t){return Pr(Object(t))}function q(t){return function(r){return null==r?void 0:r[t]}}function G(t,r){if(r)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}function Z(t){var r=new t.constructor(t.byteLength);return new kr(r).set(new kr(t)),r}function V(t,r){var e=r?Z(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function H(t,r,e){var o=r?e(l(t),!0):l(t);return u(o,n,new t.constructor)}function K(t){var r=new t.constructor(t.source,ir.exec(t));return r.lastIndex=t.lastIndex,r}function Q(t,r,e){var n=r?e(h(t),!0):h(t);return u(n,o,new t.constructor)}function X(t){return Gr?Object(Gr.call(t)):{}}function Y(t,r){var e=r?Z(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function tt(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r}function rt(t,r,e,n){e||(e={});for(var o=-1,a=r.length;++o<a;){var i=r[o],u=n?n(e[i],t[i],i,e,t):t[i];C(e,i,u)}return e}function et(t,r){return rt(t,ut(t),r)}function nt(t){return U(t,kt,ut)}function ot(t,r){var e=t.__data__;return vt(r)?e["string"==typeof r?"string":"hash"]:e.map}function at(t,r){var e=t[r];return xt(e)?e:void 0}function it(t){return Nr(Object(t))}function ut(t){return Er(Object(t))}function ct(t){return jr.call(t)}function st(t){var r=t.length,e=t.constructor(r);return r&&"string"==typeof t[0]&&Or.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function ft(t){return"function"!=typeof t.constructor||pt(t)?{}:B(it(t))}function lt(t,r,e,n){var o=t.constructor;switch(r){case Vt:return Z(t);case Rt:case $t:return new o(+t);case Ht:return V(t,n);case Kt:case Qt:case Xt:case Yt:case tr:case rr:case er:case nr:case or:return Y(t,n);case Jt:return H(t,n,e);case Tt:case qt:return new o(t);case It:return K(t);case Wt:return Q(t,n,e);case Gt:return X(t)}}function ht(t){var r=t?t.length:void 0;return Ot(r)&&(Vr(t)||At(t)||gt(t))?c(r,String):null}function dt(t,r){return r=null==r?Mt:r,!!r&&("number"==typeof t||cr.test(t))&&t>-1&&t%1==0&&r>t}function vt(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}function pt(t){var r=t&&t.constructor,e="function"==typeof r&&r.prototype||wr;return t===e}function bt(t){if(null!=t){try{return mr.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function yt(t,r){return t===r||t!==t&&r!==r}function gt(t){return wt(t)&&Or.call(t,"callee")&&(!zr.call(t,"callee")||jr.call(t)==Nt)}function _t(t){return null!=t&&Ot(Zr(t))&&!mt(t)}function wt(t){return St(t)&&_t(t)}function mt(t){var r=jt(t)?jr.call(t):"";return r==Ct||r==Lt}function Ot(t){return"number"==typeof t&&t>-1&&t%1==0&&Mt>=t}function jt(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function St(t){return!!t&&"object"==typeof t}function xt(t){if(!jt(t))return!1;var r=mt(t)||f(t)?Sr:ur;return r.test(bt(t))}function At(t){return"string"==typeof t||!Vr(t)&&St(t)&&jr.call(t)==qt}function kt(t){var r=pt(t);if(!r&&!_t(t))return W(t);var e=ht(t),n=!!e,o=e||[],a=o.length;for(var i in t)!I(t,i)||n&&("length"==i||dt(i,a))||r&&"constructor"==i||o.push(i);return o}function Et(t){return function(){return t}}var Dt=200,zt="__lodash_hash_undefined__",Mt=9007199254740991,Nt="[object Arguments]",Pt="[object Array]",Rt="[object Boolean]",$t="[object Date]",Ft="[object Error]",Ct="[object Function]",Lt="[object GeneratorFunction]",Jt="[object Map]",Tt="[object Number]",Bt="[object Object]",Ut="[object Promise]",It="[object RegExp]",Wt="[object Set]",qt="[object String]",Gt="[object Symbol]",Zt="[object WeakMap]",Vt="[object ArrayBuffer]",Ht="[object DataView]",Kt="[object Float32Array]",Qt="[object Float64Array]",Xt="[object Int8Array]",Yt="[object Int16Array]",tr="[object Int32Array]",rr="[object Uint8Array]",er="[object Uint8ClampedArray]",nr="[object Uint16Array]",or="[object Uint32Array]",ar=/[\\^$.*+?()[\]{}|]/g,ir=/\w*$/,ur=/^\[object .+?Constructor\]$/,cr=/^(?:0|[1-9]\d*)$/,sr={};sr[Nt]=sr[Pt]=sr[Vt]=sr[Ht]=sr[Rt]=sr[$t]=sr[Kt]=sr[Qt]=sr[Xt]=sr[Yt]=sr[tr]=sr[Jt]=sr[Tt]=sr[Bt]=sr[It]=sr[Wt]=sr[qt]=sr[Gt]=sr[rr]=sr[er]=sr[nr]=sr[or]=!0,sr[Ft]=sr[Ct]=sr[Zt]=!1;var fr={"function":!0,object:!0},lr=fr[typeof e]&&e&&!e.nodeType?e:void 0,hr=fr[typeof r]&&r&&!r.nodeType?r:void 0,dr=hr&&hr.exports===lr?lr:void 0,vr=s(lr&&hr&&"object"==typeof t&&t),pr=s(fr[typeof self]&&self),br=s(fr[typeof window]&&window),yr=s(fr[typeof this]&&this),gr=vr||br!==(yr&&yr.window)&&br||pr||yr||Function("return this")(),_r=Array.prototype,wr=Object.prototype,mr=Function.prototype.toString,Or=wr.hasOwnProperty,jr=wr.toString,Sr=RegExp("^"+mr.call(Or).replace(ar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xr=dr?gr.Buffer:void 0,Ar=gr.Symbol,kr=gr.Uint8Array,Er=Object.getOwnPropertySymbols,Dr=Object.create,zr=wr.propertyIsEnumerable,Mr=_r.splice,Nr=Object.getPrototypeOf,Pr=Object.keys,Rr=at(gr,"DataView"),$r=at(gr,"Map"),Fr=at(gr,"Promise"),Cr=at(gr,"Set"),Lr=at(gr,"WeakMap"),Jr=at(Object,"create"),Tr=bt(Rr),Br=bt($r),Ur=bt(Fr),Ir=bt(Cr),Wr=bt(Lr),qr=Ar?Ar.prototype:void 0,Gr=qr?qr.valueOf:void 0;d.prototype.clear=v,d.prototype["delete"]=p,d.prototype.get=b,d.prototype.has=y,d.prototype.set=g,_.prototype.clear=w,_.prototype["delete"]=m,_.prototype.get=O,_.prototype.has=j,_.prototype.set=S,x.prototype.clear=A,x.prototype["delete"]=k,x.prototype.get=E,x.prototype.has=D,x.prototype.set=z,M.prototype.clear=N,M.prototype["delete"]=P,M.prototype.get=R,M.prototype.has=$,M.prototype.set=F;var Zr=q("length");Er||(ut=function(){return[]}),(Rr&&ct(new Rr(new ArrayBuffer(1)))!=Ht||$r&&ct(new $r)!=Jt||Fr&&ct(Fr.resolve())!=Ut||Cr&&ct(new Cr)!=Wt||Lr&&ct(new Lr)!=Zt)&&(ct=function(t){var r=jr.call(t),e=r==Bt?t.constructor:void 0,n=e?bt(e):void 0;if(n)switch(n){case Tr:return Ht;case Br:return Jt;case Ur:return Ut;case Ir:return Wt;case Wr:return Zt}return r});var Vr=Array.isArray,Hr=xr?function(t){return t instanceof xr}:Et(!1);r.exports=T}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,r,e){function n(t){return o(t,!1,!0)}var o=t("lodash._baseclone");r.exports=n},{"lodash._baseclone":9}]},{},[6]);